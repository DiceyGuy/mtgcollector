{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kim-a\\\\Documents\\\\DiceyTeck\\\\MTG Scanner\\\\src\\\\Scanner.js\",\n  _s = $RefreshSig$();\n// Scanner.js - MTG INFINITY SCANNER - COMPLETE CLEAN VERSION\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport ClaudeVisionService from './ClaudeVisionService';\nimport DonationButton from './DonationButton';\nimport AdminPanel from './AdminPanel';\nimport AlphaUserSystem from './AlphaUserSystem';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Scanner = () => {\n  _s();\n  // State\n  const [scanResult, setScanResult] = useState(null);\n  const [isScanning, setIsScanning] = useState(false);\n  const [cameraError, setCameraError] = useState(null);\n  const [scannedCards, setScannedCards] = useState([]);\n  const [cameraReady, setCameraReady] = useState(false);\n  const [showAdminPanel, setShowAdminPanel] = useState(false);\n  const [scanMode, setScanMode] = useState('auto');\n  const [countdown, setCountdown] = useState(null);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [showCollection, setShowCollection] = useState(false);\n\n  // Refs\n  const videoRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const scanningRef = useRef(false);\n  const frameTimeoutRef = useRef(null);\n  const countdownRef = useRef(null);\n\n  // Services\n  const [visionService] = useState(() => {\n    console.log('🔧 Creating ClaudeVisionService...');\n    try {\n      const service = new ClaudeVisionService();\n      console.log('✅ ClaudeVisionService created successfully');\n      return service;\n    } catch (error) {\n      console.error('❌ Failed to create ClaudeVisionService:', error);\n      return null;\n    }\n  });\n  const [userSystem] = useState(() => {\n    console.log('👤 Creating AlphaUserSystem...');\n    return new AlphaUserSystem();\n  });\n\n  // Initialize user on component mount\n  useEffect(() => {\n    const user = userSystem.getCurrentUser();\n    setCurrentUser(user);\n    console.log(`👋 Welcome back, Alpha Tester #${user.alphaNumber}: ${user.username}`);\n  }, [userSystem]);\n\n  // Check for admin access\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    if (urlParams.get('admin') === 'true') {\n      setShowAdminPanel(true);\n      window.history.replaceState({}, document.title, window.location.pathname);\n    }\n  }, []);\n\n  // Record successful scans with \"DING\" sound\n  const recordSuccessfulScan = (cardName, confidence, mode) => {\n    if (!cardName || confidence < 70) {\n      console.log('⚠️ Scan not recorded: low confidence or no card name');\n      return;\n    }\n    console.log(`🔔 DING! Recording successful scan: ${cardName} (${confidence}%)`);\n\n    // Play success sound (optional)\n    try {\n      const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+L3wmolBJa6n9j91N');\n      audio.volume = 0.3;\n      audio.play().catch(() => {});\n    } catch (error) {\n      // Ignore audio errors\n    }\n\n    // Use correct method name\n    const updatedUser = userSystem.recordSuccessfulScan(cardName, confidence, mode);\n    setCurrentUser(updatedUser);\n\n    // Add to recent scans display\n    setScannedCards(prev => [{\n      id: Date.now(),\n      name: cardName,\n      confidence: confidence,\n      timestamp: new Date().toISOString(),\n      mode: mode\n    }, ...prev.slice(0, 9)]);\n  };\n\n  // Camera setup\n  useEffect(() => {\n    if (!visionService || scanMode !== 'auto') return;\n    let mounted = true;\n    const setupCamera = async () => {\n      try {\n        console.log('🎥 Setting up camera for auto-scan mode...');\n        setCameraReady(false);\n        setCameraError(null);\n        const devices = await navigator.mediaDevices.enumerateDevices();\n        const videoDevices = devices.filter(device => device.kind === 'videoinput');\n        let selectedDeviceId = null;\n        for (const device of videoDevices) {\n          const label = device.label.toLowerCase();\n          if (!label.includes('elgato') && !label.includes('virtual') && !label.includes('obs') && !label.includes('zoom') && !label.includes('teams')) {\n            selectedDeviceId = device.deviceId;\n            console.log('✅ Selected real camera:', device.label);\n            break;\n          }\n        }\n        const constraints = {\n          video: {\n            width: {\n              ideal: 1280\n            },\n            height: {\n              ideal: 720\n            },\n            facingMode: 'environment'\n          }\n        };\n        if (selectedDeviceId) {\n          constraints.video.deviceId = {\n            exact: selectedDeviceId\n          };\n        }\n        const stream = await navigator.mediaDevices.getUserMedia(constraints);\n        if (mounted && videoRef.current) {\n          if (videoRef.current.srcObject) {\n            const tracks = videoRef.current.srcObject.getTracks();\n            tracks.forEach(track => track.stop());\n          }\n          videoRef.current.srcObject = stream;\n          videoRef.current.onloadedmetadata = () => {\n            if (mounted) {\n              console.log('✅ Camera ready');\n              setCameraReady(true);\n              setCameraError(null);\n            }\n          };\n          videoRef.current.onerror = e => {\n            console.error('❌ Video error:', e);\n            if (mounted) setCameraError('Video playback failed');\n          };\n          try {\n            await videoRef.current.play();\n            console.log('▶️ Video playing');\n          } catch (playError) {\n            console.warn('⚠️ Video play warning:', playError.message);\n          }\n        }\n      } catch (error) {\n        console.error('❌ Camera setup failed:', error);\n        if (mounted) {\n          setCameraError(`Camera failed: ${error.message}`);\n          setCameraReady(false);\n        }\n      }\n    };\n    setupCamera();\n    return () => {\n      mounted = false;\n      if (videoRef.current && videoRef.current.srcObject) {\n        const tracks = videoRef.current.srcObject.getTracks();\n        tracks.forEach(track => track.stop());\n      }\n    };\n  }, [visionService, scanMode]);\n\n  // AUTO SCANNING FUNCTIONS\n  const startAutoScanning = () => {\n    if (!visionService || !videoRef.current || cameraError || !cameraReady) {\n      console.error('❌ Camera not ready for auto scan');\n      return;\n    }\n    if (scanningRef.current) {\n      console.log('⚠️ Already scanning');\n      return;\n    }\n    console.log('▶️ Starting auto scan with 3-second countdown...');\n    startCountdown();\n  };\n  const startCountdown = () => {\n    let count = 3;\n    setCountdown(count);\n    countdownRef.current = setInterval(() => {\n      count--;\n      if (count > 0) {\n        setCountdown(count);\n      } else {\n        clearInterval(countdownRef.current);\n        setCountdown(null);\n        startActualScanning();\n      }\n    }, 1000);\n  };\n  const startActualScanning = () => {\n    scanningRef.current = true;\n    setIsScanning(true);\n    processFrame();\n  };\n  const stopAutoScanning = () => {\n    console.log('⏹️ Stopping auto scan...');\n    scanningRef.current = false;\n    setIsScanning(false);\n    setCountdown(null);\n    if (countdownRef.current) {\n      clearInterval(countdownRef.current);\n      countdownRef.current = null;\n    }\n    if (frameTimeoutRef.current) {\n      clearTimeout(frameTimeoutRef.current);\n      frameTimeoutRef.current = null;\n    }\n  };\n  const processFrame = async () => {\n    if (!scanningRef.current || !videoRef.current || !visionService) {\n      console.log('🛑 Stopping frame processing');\n      return;\n    }\n    try {\n      console.log('🎯 Processing frame...');\n      const result = await visionService.processVideoFrame(videoRef.current);\n      if (!scanningRef.current) return;\n      if (result.hasCard) {\n        setScanResult({\n          type: 'success',\n          cardName: result.cardName,\n          confidence: result.confidence,\n          detectionConfidence: result.detectionConfidence,\n          dimensions: result.dimensions,\n          processingTime: result.processingTime,\n          timestamp: new Date().toISOString(),\n          scanMode: 'auto'\n        });\n        console.log(`🎯 Auto-scan found: ${result.cardName} (${result.confidence}%)`);\n\n        // Only record if high confidence\n        if (result.confidence >= 70) {\n          recordSuccessfulScan(result.cardName, result.confidence, 'auto');\n        }\n      } else {\n        setScanResult({\n          type: 'waiting',\n          message: result.message,\n          reason: result.reason,\n          details: result.details,\n          timestamp: new Date().toISOString(),\n          scanMode: 'auto'\n        });\n        console.log(`📍 ${result.reason}: ${result.message}`);\n      }\n    } catch (error) {\n      console.error('❌ Frame processing error:', error);\n      if (scanningRef.current) {\n        setScanResult({\n          type: 'error',\n          message: 'Processing error: ' + error.message,\n          timestamp: new Date().toISOString(),\n          scanMode: 'auto'\n        });\n      }\n    }\n    if (scanningRef.current) {\n      frameTimeoutRef.current = setTimeout(processFrame, 1500);\n    }\n  };\n\n  // MANUAL SCANNING FUNCTIONS\n  const handleManualScan = () => {\n    var _fileInputRef$current;\n    if (!visionService) {\n      console.error('❌ Vision service not available');\n      return;\n    }\n    (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n  };\n  const handleFileSelect = async event => {\n    const file = event.target.files[0];\n    if (!file) return;\n    console.log('📁 Manual scan starting with file:', file.name);\n    setScanResult({\n      type: 'processing',\n      message: 'Processing uploaded image...',\n      timestamp: new Date().toISOString(),\n      scanMode: 'manual'\n    });\n    try {\n      const dataUrl = await fileToDataUrl(file);\n      const result = await visionService.scanCard(dataUrl, 'standard');\n      if (result.success && result.confidence >= 70) {\n        const cardName = result.correctedName || result.cleanText || result.text;\n        setScanResult({\n          type: 'success',\n          cardName: cardName,\n          confidence: result.confidence,\n          strategy: result.strategy,\n          isKnownCard: result.isKnownCard,\n          finalScore: result.finalScore,\n          timestamp: new Date().toISOString(),\n          scanMode: 'manual'\n        });\n        console.log(`🎯 Manual scan found: ${cardName} (${result.confidence}%)`);\n\n        // Only record successful manual scans\n        recordSuccessfulScan(cardName, result.confidence, 'manual');\n      } else {\n        setScanResult({\n          type: 'error',\n          message: `Low confidence scan: ${result.confidence}%. Try a clearer image.`,\n          details: `Strategy: ${result.strategy}, Text: \"${result.cleanText}\"`,\n          timestamp: new Date().toISOString(),\n          scanMode: 'manual'\n        });\n      }\n    } catch (error) {\n      console.error('❌ Manual scan error:', error);\n      setScanResult({\n        type: 'error',\n        message: 'Failed to process image: ' + error.message,\n        timestamp: new Date().toISOString(),\n        scanMode: 'manual'\n      });\n    }\n    event.target.value = '';\n  };\n  const fileToDataUrl = file => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = e => resolve(e.target.result);\n      reader.onerror = reject;\n      reader.readAsDataURL(file);\n    });\n  };\n\n  // COLLECTION MANAGEMENT\n  const handleRemoveCard = cardId => {\n    const updatedUser = userSystem.removeFromCollection(cardId);\n    setCurrentUser(updatedUser);\n  };\n  const handleUpdateCardCount = (cardId, newCount) => {\n    const updatedUser = userSystem.updateCardCount(cardId, newCount);\n    setCurrentUser(updatedUser);\n  };\n\n  // Cleanup\n  useEffect(() => {\n    return () => {\n      if (frameTimeoutRef.current) {\n        clearTimeout(frameTimeoutRef.current);\n      }\n      if (countdownRef.current) {\n        clearInterval(countdownRef.current);\n      }\n    };\n  }, []);\n\n  // RENDER FUNCTIONS\n  const renderUserInfo = () => {\n    if (!currentUser) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: 'rgba(255,255,255,0.15)',\n        padding: '10px 16px',\n        borderRadius: '8px',\n        marginBottom: '8px',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '14px',\n            fontWeight: 'bold'\n          },\n          children: [\"\\uD83E\\uDDEA Alpha Tester #\", currentUser.alphaNumber, \": \", currentUser.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '12px',\n            opacity: 0.8\n          },\n          children: [currentUser.totalScans, \" scans \\u2022 \", currentUser.collection.length, \" unique cards\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowCollection(!showCollection),\n        style: {\n          padding: '6px 12px',\n          backgroundColor: 'rgba(255,255,255,0.2)',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px',\n          fontSize: '12px',\n          cursor: 'pointer'\n        },\n        children: \"\\uD83D\\uDCDA Collection\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 13\n    }, this);\n  };\n  const renderCollection = () => {\n    if (!showCollection || !currentUser) return null;\n    const collection = userSystem.getCollection();\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '20px',\n        padding: '20px',\n        backgroundColor: '#f8f9fa',\n        borderRadius: '8px',\n        border: '2px solid #28a745'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginBottom: '15px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: 0\n          },\n          children: [\"\\uD83D\\uDCDA Your Collection (\", collection.length, \" unique cards)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowCollection(false),\n          style: {\n            padding: '6px 12px',\n            backgroundColor: '#6c757d',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: 'pointer'\n          },\n          children: \"\\u2715 Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 17\n      }, this), collection.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center',\n          padding: '40px',\n          color: '#666'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"\\uD83D\\uDCE6 No cards in collection yet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Start scanning some MTG cards to build your collection!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'grid',\n          gap: '10px',\n          maxHeight: '400px',\n          overflowY: 'auto'\n        },\n        children: collection.map(card => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            padding: '12px',\n            backgroundColor: 'white',\n            borderRadius: '6px',\n            border: '1px solid #ddd'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              flex: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontWeight: 'bold',\n                fontSize: '16px'\n              },\n              children: card.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 501,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '12px',\n                color: '#666'\n              },\n              children: [\"Avg confidence: \", card.avgConfidence, \"% \\u2022 Last scanned: \", new Date(card.lastScanned).toLocaleDateString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '10px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '5px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleUpdateCardCount(card.id, card.count - 1),\n                style: {\n                  padding: '4px 8px',\n                  backgroundColor: '#dc3545',\n                  color: 'white',\n                  border: 'none',\n                  borderRadius: '3px',\n                  cursor: 'pointer',\n                  fontSize: '12px'\n                },\n                children: \"\\u2212\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 520,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  minWidth: '30px',\n                  textAlign: 'center',\n                  fontWeight: 'bold'\n                },\n                children: card.count\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 535,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleUpdateCardCount(card.id, card.count + 1),\n                style: {\n                  padding: '4px 8px',\n                  backgroundColor: '#28a745',\n                  color: 'white',\n                  border: 'none',\n                  borderRadius: '3px',\n                  cursor: 'pointer',\n                  fontSize: '12px'\n                },\n                children: \"+\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 543,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleRemoveCard(card.id),\n              style: {\n                padding: '4px 8px',\n                backgroundColor: '#f44336',\n                color: 'white',\n                border: 'none',\n                borderRadius: '3px',\n                cursor: 'pointer',\n                fontSize: '12px'\n              },\n              title: \"Remove from collection\",\n              children: \"\\uD83D\\uDDD1\\uFE0F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 559,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 510,\n            columnNumber: 33\n          }, this)]\n        }, card.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 13\n    }, this);\n  };\n  const renderStatus = () => {\n    if (scanMode === 'auto' && cameraError) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '20px',\n          backgroundColor: '#ffebee',\n          border: '1px solid #f44336',\n          borderRadius: '8px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u274C Camera Error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: cameraError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 588,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: '14px',\n            color: '#666'\n          },\n          children: \"\\uD83D\\uDCA1 Try switching to Manual Scan mode or use a different camera\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 589,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 17\n      }, this);\n    }\n    if (!visionService) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '20px',\n          backgroundColor: '#ffebee',\n          border: '1px solid #f44336',\n          borderRadius: '8px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u274C Service Error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 599,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Vision service failed to initialize\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 600,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 598,\n        columnNumber: 17\n      }, this);\n    }\n    if (scanMode === 'auto' && !cameraReady) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '20px',\n          backgroundColor: '#fff3e0',\n          border: '1px solid #ff9800',\n          borderRadius: '8px',\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83D\\uDCF9 Setting up Camera...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 608,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Connecting for auto-scan mode...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 609,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 607,\n        columnNumber: 17\n      }, this);\n    }\n    if (countdown !== null) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '20px',\n          backgroundColor: '#e3f2fd',\n          border: '1px solid #2196f3',\n          borderRadius: '8px',\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"\\uD83D\\uDD50 Scan Starting in \", countdown, \"...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 617,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Position your MTG card clearly in the camera view\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 618,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: stopAutoScanning,\n          style: {\n            padding: '8px 16px',\n            backgroundColor: '#f44336',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: 'pointer'\n          },\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 619,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 616,\n        columnNumber: 17\n      }, this);\n    }\n    if (!scanResult) {\n      if (scanMode === 'auto') {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '20px',\n            backgroundColor: '#e8f5e8',\n            border: '1px solid #4caf50',\n            borderRadius: '8px',\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\u2705 Auto-Scan Ready!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 640,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Camera ready for automatic card scanning\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 641,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 639,\n          columnNumber: 21\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '20px',\n            backgroundColor: '#e8f5e8',\n            border: '1px solid #4caf50',\n            borderRadius: '8px',\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD83D\\uDCC1 Manual Scan Ready!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 647,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Click \\\"Upload & Scan\\\" to select an image file\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 648,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 646,\n          columnNumber: 21\n        }, this);\n      }\n    }\n    switch (scanResult.type) {\n      case 'processing':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '20px',\n            backgroundColor: '#e3f2fd',\n            border: '1px solid #2196f3',\n            borderRadius: '8px',\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD83D\\uDD04 Processing...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 658,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: scanResult.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 659,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 657,\n          columnNumber: 21\n        }, this);\n      case 'success':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '20px',\n            backgroundColor: '#e8f5e8',\n            border: '1px solid #4caf50',\n            borderRadius: '8px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"\\u2705 Card Detected (\", scanResult.scanMode, \") \\uD83D\\uDD14\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 666,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: '20px',\n              fontWeight: 'bold',\n              margin: '10px 0'\n            },\n            children: scanResult.cardName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 667,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Confidence: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: [scanResult.confidence, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 668,\n              columnNumber: 40\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 668,\n            columnNumber: 25\n          }, this), scanResult.strategy && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Strategy: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: scanResult.strategy\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 669,\n              columnNumber: 62\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 669,\n            columnNumber: 49\n          }, this), scanResult.processingTime && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Processing Time: \", scanResult.processingTime, \"ms\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 670,\n            columnNumber: 55\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: '12px',\n              color: '#28a745',\n              fontWeight: 'bold'\n            },\n            children: \"\\uD83D\\uDD14 Added to collection!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 671,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 665,\n          columnNumber: 21\n        }, this);\n      case 'waiting':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '20px',\n            backgroundColor: '#fff3e0',\n            border: '1px solid #ff9800',\n            borderRadius: '8px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD83D\\uDD0D Looking for Card...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 680,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: scanResult.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 681,\n            columnNumber: 25\n          }, this), scanResult.details && /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: '12px',\n              color: '#999'\n            },\n            children: scanResult.details\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 682,\n            columnNumber: 48\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 679,\n          columnNumber: 21\n        }, this);\n      case 'error':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '20px',\n            backgroundColor: '#ffebee',\n            border: '1px solid #f44336',\n            borderRadius: '8px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"\\u274C Scan Error (\", scanResult.scanMode, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 689,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: scanResult.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 690,\n            columnNumber: 25\n          }, this), scanResult.details && /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: '12px',\n              color: '#666'\n            },\n            children: scanResult.details\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 691,\n            columnNumber: 48\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 688,\n          columnNumber: 21\n        }, this);\n      default:\n        return null;\n    }\n  };\n  const renderHistory = () => {\n    if (scannedCards.length === 0) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '20px',\n        padding: '20px',\n        backgroundColor: '#f9f9f9',\n        borderRadius: '8px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: [\"\\uD83D\\uDCCB Recent Scans (\", scannedCards.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 705,\n        columnNumber: 17\n      }, this), scannedCards.slice(0, 5).map(card => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          padding: '8px',\n          margin: '5px 0',\n          backgroundColor: 'white',\n          borderRadius: '4px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontWeight: 'bold'\n          },\n          children: card.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 716,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '10px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              padding: '2px 6px',\n              backgroundColor: card.mode === 'auto' ? '#2196f3' : '#ff9800',\n              color: 'white',\n              borderRadius: '3px',\n              fontSize: '11px'\n            },\n            children: card.mode\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 718,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [card.confidence, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 727,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: '12px',\n              color: '#666'\n            },\n            children: new Date(card.timestamp).toLocaleTimeString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 728,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 717,\n          columnNumber: 25\n        }, this)]\n      }, card.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 707,\n        columnNumber: 21\n      }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setScannedCards([]),\n        style: {\n          marginTop: '10px',\n          padding: '8px 16px',\n          backgroundColor: '#f44336',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px',\n          cursor: 'pointer'\n        },\n        children: \"Clear History\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 734,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 704,\n      columnNumber: 13\n    }, this);\n  };\n\n  // Admin panel check\n  if (showAdminPanel) {\n    return /*#__PURE__*/_jsxDEV(AdminPanel, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 754,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: '800px',\n      margin: '0 auto',\n      padding: '20px',\n      fontFamily: 'Arial, sans-serif'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: '20px',\n        padding: '20px',\n        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n        color: 'white',\n        borderRadius: '12px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            margin: 0,\n            fontSize: '28px'\n          },\n          children: \"\\uD83C\\uDCCF MTG Infinity Scanner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 771,\n          columnNumber: 21\n        }, this), renderUserInfo(), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontWeight: 'bold'\n          },\n          children: countdown !== null ? `🕐 Starting in ${countdown}...` : isScanning ? '🟢 Auto-Scanning Active' : scanMode === 'auto' && cameraReady ? '🔴 Auto-Scan Ready' : scanMode === 'manual' ? '📁 Manual Scan Mode' : '🟡 Setting up...'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 773,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 770,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '10px',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(DonationButton, {\n          placement: \"header\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 782,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onDoubleClick: () => setShowAdminPanel(true),\n          style: {\n            padding: '6px 8px',\n            backgroundColor: 'rgba(255,255,255,0.2)',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            fontSize: '12px',\n            cursor: 'pointer',\n            opacity: 0.7\n          },\n          title: \"Double-click for admin access\",\n          children: \"\\uD83D\\uDD27\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 783,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 781,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 760,\n      columnNumber: 13\n    }, this), renderCollection(), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        marginBottom: '20px',\n        gap: '10px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setScanMode('auto'),\n        style: {\n          padding: '12px 24px',\n          backgroundColor: scanMode === 'auto' ? '#4caf50' : '#e0e0e0',\n          color: scanMode === 'auto' ? 'white' : '#333',\n          border: 'none',\n          borderRadius: '8px',\n          fontWeight: 'bold',\n          cursor: 'pointer'\n        },\n        children: \"\\uD83D\\uDCF9 Auto Scan (Camera)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 812,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setScanMode('manual'),\n        style: {\n          padding: '12px 24px',\n          backgroundColor: scanMode === 'manual' ? '#4caf50' : '#e0e0e0',\n          color: scanMode === 'manual' ? 'white' : '#333',\n          border: 'none',\n          borderRadius: '8px',\n          fontWeight: 'bold',\n          cursor: 'pointer'\n        },\n        children: \"\\uD83D\\uDCC1 Manual Scan (Upload)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 826,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 806,\n      columnNumber: 13\n    }, this), scanMode === 'auto' && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        marginBottom: '20px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'relative',\n          display: 'inline-block',\n          border: '3px solid #4caf50',\n          borderRadius: '8px',\n          overflow: 'hidden',\n          backgroundColor: '#000'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"video\", {\n          ref: videoRef,\n          autoPlay: true,\n          playsInline: true,\n          muted: true,\n          style: {\n            width: '100%',\n            maxWidth: '640px',\n            height: 'auto',\n            display: 'block'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 853,\n          columnNumber: 25\n        }, this), !cameraReady && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            top: '50%',\n            left: '50%',\n            transform: 'translate(-50%, -50%)',\n            color: 'white',\n            fontSize: '18px',\n            fontWeight: 'bold',\n            textAlign: 'center',\n            backgroundColor: 'rgba(0,0,0,0.8)',\n            padding: '20px',\n            borderRadius: '8px'\n          },\n          children: [\"\\uD83D\\uDCF9\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 879,\n            columnNumber: 35\n          }, this), \"Connecting to Camera...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 866,\n          columnNumber: 29\n        }, this), countdown !== null && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            top: '50%',\n            left: '50%',\n            transform: 'translate(-50%, -50%)',\n            color: 'white',\n            fontSize: '48px',\n            fontWeight: 'bold',\n            textShadow: '2px 2px 4px rgba(0,0,0,0.8)'\n          },\n          children: countdown\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 883,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 845,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 844,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        marginBottom: '20px'\n      },\n      children: scanMode === 'auto' ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: isScanning || countdown !== null ? stopAutoScanning : startAutoScanning,\n        disabled: !!cameraError || !visionService || !cameraReady,\n        style: {\n          padding: '16px 32px',\n          fontSize: '18px',\n          backgroundColor: isScanning || countdown !== null ? '#f44336' : '#4caf50',\n          color: 'white',\n          border: 'none',\n          borderRadius: '8px',\n          cursor: !!cameraError || !visionService || !cameraReady ? 'not-allowed' : 'pointer',\n          opacity: !!cameraError || !visionService || !cameraReady ? 0.6 : 1,\n          fontWeight: 'bold'\n        },\n        children: countdown !== null ? '⏹️ Cancel Countdown' : isScanning ? '⏹️ Stop Auto-Scan' : '▶️ Start Auto-Scan (3s)'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 903,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleManualScan,\n          disabled: !visionService,\n          style: {\n            padding: '16px 32px',\n            fontSize: '18px',\n            backgroundColor: '#ff9800',\n            color: 'white',\n            border: 'none',\n            borderRadius: '8px',\n            cursor: !visionService ? 'not-allowed' : 'pointer',\n            opacity: !visionService ? 0.6 : 1,\n            fontWeight: 'bold'\n          },\n          children: \"\\uD83D\\uDCC1 Upload & Scan Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 923,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: fileInputRef,\n          type: \"file\",\n          accept: \"image/*\",\n          onChange: handleFileSelect,\n          style: {\n            display: 'none'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 940,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: '10px 0 0 0',\n            color: '#666',\n            fontSize: '14px'\n          },\n          children: \"Supports: JPG, PNG, WEBP \\u2022 Max size: 10MB\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 947,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 922,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 901,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [renderStatus(), renderHistory()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 955,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '40px',\n        padding: '20px',\n        textAlign: 'center',\n        backgroundColor: '#f8f9fa',\n        borderRadius: '8px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          margin: '0 0 15px 0',\n          color: '#666'\n        },\n        children: \"\\uD83C\\uDF55 Support a Starving Dev - Coffee and ramen funds appreciated!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 968,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(DonationButton, {\n        placement: \"footer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 971,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          margin: '15px 0 0 0',\n          fontSize: '12px',\n          color: '#999'\n        },\n        children: \"Alpha Build \\u2022 Collection System \\u2022 Built with \\u2764\\uFE0F for Magic players\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 972,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 961,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 758,\n    columnNumber: 9\n  }, this);\n};\n_s(Scanner, \"44KYGZgeicMELXO/pw1xVCcBxE8=\");\n_c = Scanner;\nexport default Scanner;\nvar _c;\n$RefreshReg$(_c, \"Scanner\");","map":{"version":3,"names":["React","useState","useRef","useEffect","ClaudeVisionService","DonationButton","AdminPanel","AlphaUserSystem","jsxDEV","_jsxDEV","Scanner","_s","scanResult","setScanResult","isScanning","setIsScanning","cameraError","setCameraError","scannedCards","setScannedCards","cameraReady","setCameraReady","showAdminPanel","setShowAdminPanel","scanMode","setScanMode","countdown","setCountdown","currentUser","setCurrentUser","showCollection","setShowCollection","videoRef","fileInputRef","scanningRef","frameTimeoutRef","countdownRef","visionService","console","log","service","error","userSystem","user","getCurrentUser","alphaNumber","username","urlParams","URLSearchParams","window","location","search","get","history","replaceState","document","title","pathname","recordSuccessfulScan","cardName","confidence","mode","audio","Audio","volume","play","catch","updatedUser","prev","id","Date","now","name","timestamp","toISOString","slice","mounted","setupCamera","devices","navigator","mediaDevices","enumerateDevices","videoDevices","filter","device","kind","selectedDeviceId","label","toLowerCase","includes","deviceId","constraints","video","width","ideal","height","facingMode","exact","stream","getUserMedia","current","srcObject","tracks","getTracks","forEach","track","stop","onloadedmetadata","onerror","e","playError","warn","message","startAutoScanning","startCountdown","count","setInterval","clearInterval","startActualScanning","processFrame","stopAutoScanning","clearTimeout","result","processVideoFrame","hasCard","type","detectionConfidence","dimensions","processingTime","reason","details","setTimeout","handleManualScan","_fileInputRef$current","click","handleFileSelect","event","file","target","files","dataUrl","fileToDataUrl","scanCard","success","correctedName","cleanText","text","strategy","isKnownCard","finalScore","value","Promise","resolve","reject","reader","FileReader","onload","readAsDataURL","handleRemoveCard","cardId","removeFromCollection","handleUpdateCardCount","newCount","updateCardCount","renderUserInfo","style","backgroundColor","padding","borderRadius","marginBottom","display","justifyContent","alignItems","children","fontSize","fontWeight","fileName","_jsxFileName","lineNumber","columnNumber","opacity","totalScans","collection","length","onClick","color","border","cursor","renderCollection","getCollection","margin","textAlign","gap","maxHeight","overflowY","map","card","flex","avgConfidence","lastScanned","toLocaleDateString","minWidth","renderStatus","renderHistory","marginTop","toLocaleTimeString","maxWidth","fontFamily","background","placement","onDoubleClick","position","overflow","ref","autoPlay","playsInline","muted","top","left","transform","textShadow","disabled","accept","onChange","_c","$RefreshReg$"],"sources":["C:/Users/kim-a/Documents/DiceyTeck/MTG Scanner/src/Scanner.js"],"sourcesContent":["// Scanner.js - MTG INFINITY SCANNER - COMPLETE CLEAN VERSION\r\n\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport ClaudeVisionService from './ClaudeVisionService';\r\nimport DonationButton from './DonationButton';\r\nimport AdminPanel from './AdminPanel';\r\nimport AlphaUserSystem from './AlphaUserSystem';\r\n\r\nconst Scanner = () => {\r\n    // State\r\n    const [scanResult, setScanResult] = useState(null);\r\n    const [isScanning, setIsScanning] = useState(false);\r\n    const [cameraError, setCameraError] = useState(null);\r\n    const [scannedCards, setScannedCards] = useState([]);\r\n    const [cameraReady, setCameraReady] = useState(false);\r\n    const [showAdminPanel, setShowAdminPanel] = useState(false);\r\n    const [scanMode, setScanMode] = useState('auto');\r\n    const [countdown, setCountdown] = useState(null);\r\n    const [currentUser, setCurrentUser] = useState(null);\r\n    const [showCollection, setShowCollection] = useState(false);\r\n    \r\n    // Refs\r\n    const videoRef = useRef(null);\r\n    const fileInputRef = useRef(null);\r\n    const scanningRef = useRef(false);\r\n    const frameTimeoutRef = useRef(null);\r\n    const countdownRef = useRef(null);\r\n    \r\n    // Services\r\n    const [visionService] = useState(() => {\r\n        console.log('🔧 Creating ClaudeVisionService...');\r\n        try {\r\n            const service = new ClaudeVisionService();\r\n            console.log('✅ ClaudeVisionService created successfully');\r\n            return service;\r\n        } catch (error) {\r\n            console.error('❌ Failed to create ClaudeVisionService:', error);\r\n            return null;\r\n        }\r\n    });\r\n\r\n    const [userSystem] = useState(() => {\r\n        console.log('👤 Creating AlphaUserSystem...');\r\n        return new AlphaUserSystem();\r\n    });\r\n    \r\n    // Initialize user on component mount\r\n    useEffect(() => {\r\n        const user = userSystem.getCurrentUser();\r\n        setCurrentUser(user);\r\n        console.log(`👋 Welcome back, Alpha Tester #${user.alphaNumber}: ${user.username}`);\r\n    }, [userSystem]);\r\n    \r\n    // Check for admin access\r\n    useEffect(() => {\r\n        const urlParams = new URLSearchParams(window.location.search);\r\n        if (urlParams.get('admin') === 'true') {\r\n            setShowAdminPanel(true);\r\n            window.history.replaceState({}, document.title, window.location.pathname);\r\n        }\r\n    }, []);\r\n\r\n    // Record successful scans with \"DING\" sound\r\n    const recordSuccessfulScan = (cardName, confidence, mode) => {\r\n        if (!cardName || confidence < 70) {\r\n            console.log('⚠️ Scan not recorded: low confidence or no card name');\r\n            return;\r\n        }\r\n\r\n        console.log(`🔔 DING! Recording successful scan: ${cardName} (${confidence}%)`);\r\n        \r\n        // Play success sound (optional)\r\n        try {\r\n            const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+L3wmolBJa6n9j91N');\r\n            audio.volume = 0.3;\r\n            audio.play().catch(() => {});\r\n        } catch (error) {\r\n            // Ignore audio errors\r\n        }\r\n        \r\n        // Use correct method name\r\n        const updatedUser = userSystem.recordSuccessfulScan(cardName, confidence, mode);\r\n        setCurrentUser(updatedUser);\r\n        \r\n        // Add to recent scans display\r\n        setScannedCards(prev => [{\r\n            id: Date.now(),\r\n            name: cardName,\r\n            confidence: confidence,\r\n            timestamp: new Date().toISOString(),\r\n            mode: mode\r\n        }, ...prev.slice(0, 9)]);\r\n    };\r\n    \r\n    // Camera setup\r\n    useEffect(() => {\r\n        if (!visionService || scanMode !== 'auto') return;\r\n        \r\n        let mounted = true;\r\n        \r\n        const setupCamera = async () => {\r\n            try {\r\n                console.log('🎥 Setting up camera for auto-scan mode...');\r\n                setCameraReady(false);\r\n                setCameraError(null);\r\n                \r\n                const devices = await navigator.mediaDevices.enumerateDevices();\r\n                const videoDevices = devices.filter(device => device.kind === 'videoinput');\r\n                \r\n                let selectedDeviceId = null;\r\n                for (const device of videoDevices) {\r\n                    const label = device.label.toLowerCase();\r\n                    if (!label.includes('elgato') && \r\n                        !label.includes('virtual') && \r\n                        !label.includes('obs') && \r\n                        !label.includes('zoom') &&\r\n                        !label.includes('teams')) {\r\n                        selectedDeviceId = device.deviceId;\r\n                        console.log('✅ Selected real camera:', device.label);\r\n                        break;\r\n                    }\r\n                }\r\n                \r\n                const constraints = {\r\n                    video: {\r\n                        width: { ideal: 1280 },\r\n                        height: { ideal: 720 },\r\n                        facingMode: 'environment'\r\n                    }\r\n                };\r\n                \r\n                if (selectedDeviceId) {\r\n                    constraints.video.deviceId = { exact: selectedDeviceId };\r\n                }\r\n                \r\n                const stream = await navigator.mediaDevices.getUserMedia(constraints);\r\n                \r\n                if (mounted && videoRef.current) {\r\n                    if (videoRef.current.srcObject) {\r\n                        const tracks = videoRef.current.srcObject.getTracks();\r\n                        tracks.forEach(track => track.stop());\r\n                    }\r\n                    \r\n                    videoRef.current.srcObject = stream;\r\n                    \r\n                    videoRef.current.onloadedmetadata = () => {\r\n                        if (mounted) {\r\n                            console.log('✅ Camera ready');\r\n                            setCameraReady(true);\r\n                            setCameraError(null);\r\n                        }\r\n                    };\r\n                    \r\n                    videoRef.current.onerror = (e) => {\r\n                        console.error('❌ Video error:', e);\r\n                        if (mounted) setCameraError('Video playback failed');\r\n                    };\r\n                    \r\n                    try {\r\n                        await videoRef.current.play();\r\n                        console.log('▶️ Video playing');\r\n                    } catch (playError) {\r\n                        console.warn('⚠️ Video play warning:', playError.message);\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                console.error('❌ Camera setup failed:', error);\r\n                if (mounted) {\r\n                    setCameraError(`Camera failed: ${error.message}`);\r\n                    setCameraReady(false);\r\n                }\r\n            }\r\n        };\r\n        \r\n        setupCamera();\r\n        \r\n        return () => {\r\n            mounted = false;\r\n            if (videoRef.current && videoRef.current.srcObject) {\r\n                const tracks = videoRef.current.srcObject.getTracks();\r\n                tracks.forEach(track => track.stop());\r\n            }\r\n        };\r\n    }, [visionService, scanMode]);\r\n    \r\n    // AUTO SCANNING FUNCTIONS\r\n    const startAutoScanning = () => {\r\n        if (!visionService || !videoRef.current || cameraError || !cameraReady) {\r\n            console.error('❌ Camera not ready for auto scan');\r\n            return;\r\n        }\r\n        if (scanningRef.current) {\r\n            console.log('⚠️ Already scanning');\r\n            return;\r\n        }\r\n        \r\n        console.log('▶️ Starting auto scan with 3-second countdown...');\r\n        startCountdown();\r\n    };\r\n    \r\n    const startCountdown = () => {\r\n        let count = 3;\r\n        setCountdown(count);\r\n        \r\n        countdownRef.current = setInterval(() => {\r\n            count--;\r\n            if (count > 0) {\r\n                setCountdown(count);\r\n            } else {\r\n                clearInterval(countdownRef.current);\r\n                setCountdown(null);\r\n                startActualScanning();\r\n            }\r\n        }, 1000);\r\n    };\r\n    \r\n    const startActualScanning = () => {\r\n        scanningRef.current = true;\r\n        setIsScanning(true);\r\n        processFrame();\r\n    };\r\n    \r\n    const stopAutoScanning = () => {\r\n        console.log('⏹️ Stopping auto scan...');\r\n        scanningRef.current = false;\r\n        setIsScanning(false);\r\n        setCountdown(null);\r\n        \r\n        if (countdownRef.current) {\r\n            clearInterval(countdownRef.current);\r\n            countdownRef.current = null;\r\n        }\r\n        \r\n        if (frameTimeoutRef.current) {\r\n            clearTimeout(frameTimeoutRef.current);\r\n            frameTimeoutRef.current = null;\r\n        }\r\n    };\r\n    \r\n    const processFrame = async () => {\r\n        if (!scanningRef.current || !videoRef.current || !visionService) {\r\n            console.log('🛑 Stopping frame processing');\r\n            return;\r\n        }\r\n        \r\n        try {\r\n            console.log('🎯 Processing frame...');\r\n            const result = await visionService.processVideoFrame(videoRef.current);\r\n            \r\n            if (!scanningRef.current) return;\r\n            \r\n            if (result.hasCard) {\r\n                setScanResult({\r\n                    type: 'success',\r\n                    cardName: result.cardName,\r\n                    confidence: result.confidence,\r\n                    detectionConfidence: result.detectionConfidence,\r\n                    dimensions: result.dimensions,\r\n                    processingTime: result.processingTime,\r\n                    timestamp: new Date().toISOString(),\r\n                    scanMode: 'auto'\r\n                });\r\n                \r\n                console.log(`🎯 Auto-scan found: ${result.cardName} (${result.confidence}%)`);\r\n                \r\n                // Only record if high confidence\r\n                if (result.confidence >= 70) {\r\n                    recordSuccessfulScan(result.cardName, result.confidence, 'auto');\r\n                }\r\n                \r\n            } else {\r\n                setScanResult({\r\n                    type: 'waiting',\r\n                    message: result.message,\r\n                    reason: result.reason,\r\n                    details: result.details,\r\n                    timestamp: new Date().toISOString(),\r\n                    scanMode: 'auto'\r\n                });\r\n                console.log(`📍 ${result.reason}: ${result.message}`);\r\n            }\r\n            \r\n        } catch (error) {\r\n            console.error('❌ Frame processing error:', error);\r\n            if (scanningRef.current) {\r\n                setScanResult({\r\n                    type: 'error',\r\n                    message: 'Processing error: ' + error.message,\r\n                    timestamp: new Date().toISOString(),\r\n                    scanMode: 'auto'\r\n                });\r\n            }\r\n        }\r\n        \r\n        if (scanningRef.current) {\r\n            frameTimeoutRef.current = setTimeout(processFrame, 1500);\r\n        }\r\n    };\r\n    \r\n    // MANUAL SCANNING FUNCTIONS\r\n    const handleManualScan = () => {\r\n        if (!visionService) {\r\n            console.error('❌ Vision service not available');\r\n            return;\r\n        }\r\n        fileInputRef.current?.click();\r\n    };\r\n    \r\n    const handleFileSelect = async (event) => {\r\n        const file = event.target.files[0];\r\n        if (!file) return;\r\n        \r\n        console.log('📁 Manual scan starting with file:', file.name);\r\n        setScanResult({\r\n            type: 'processing',\r\n            message: 'Processing uploaded image...',\r\n            timestamp: new Date().toISOString(),\r\n            scanMode: 'manual'\r\n        });\r\n        \r\n        try {\r\n            const dataUrl = await fileToDataUrl(file);\r\n            const result = await visionService.scanCard(dataUrl, 'standard');\r\n            \r\n            if (result.success && result.confidence >= 70) {\r\n                const cardName = result.correctedName || result.cleanText || result.text;\r\n                \r\n                setScanResult({\r\n                    type: 'success',\r\n                    cardName: cardName,\r\n                    confidence: result.confidence,\r\n                    strategy: result.strategy,\r\n                    isKnownCard: result.isKnownCard,\r\n                    finalScore: result.finalScore,\r\n                    timestamp: new Date().toISOString(),\r\n                    scanMode: 'manual'\r\n                });\r\n                \r\n                console.log(`🎯 Manual scan found: ${cardName} (${result.confidence}%)`);\r\n                \r\n                // Only record successful manual scans\r\n                recordSuccessfulScan(cardName, result.confidence, 'manual');\r\n                \r\n            } else {\r\n                setScanResult({\r\n                    type: 'error',\r\n                    message: `Low confidence scan: ${result.confidence}%. Try a clearer image.`,\r\n                    details: `Strategy: ${result.strategy}, Text: \"${result.cleanText}\"`,\r\n                    timestamp: new Date().toISOString(),\r\n                    scanMode: 'manual'\r\n                });\r\n            }\r\n            \r\n        } catch (error) {\r\n            console.error('❌ Manual scan error:', error);\r\n            setScanResult({\r\n                type: 'error',\r\n                message: 'Failed to process image: ' + error.message,\r\n                timestamp: new Date().toISOString(),\r\n                scanMode: 'manual'\r\n            });\r\n        }\r\n        \r\n        event.target.value = '';\r\n    };\r\n    \r\n    const fileToDataUrl = (file) => {\r\n        return new Promise((resolve, reject) => {\r\n            const reader = new FileReader();\r\n            reader.onload = (e) => resolve(e.target.result);\r\n            reader.onerror = reject;\r\n            reader.readAsDataURL(file);\r\n        });\r\n    };\r\n    \r\n    // COLLECTION MANAGEMENT\r\n    const handleRemoveCard = (cardId) => {\r\n        const updatedUser = userSystem.removeFromCollection(cardId);\r\n        setCurrentUser(updatedUser);\r\n    };\r\n    \r\n    const handleUpdateCardCount = (cardId, newCount) => {\r\n        const updatedUser = userSystem.updateCardCount(cardId, newCount);\r\n        setCurrentUser(updatedUser);\r\n    };\r\n    \r\n    // Cleanup\r\n    useEffect(() => {\r\n        return () => {\r\n            if (frameTimeoutRef.current) {\r\n                clearTimeout(frameTimeoutRef.current);\r\n            }\r\n            if (countdownRef.current) {\r\n                clearInterval(countdownRef.current);\r\n            }\r\n        };\r\n    }, []);\r\n    \r\n    // RENDER FUNCTIONS\r\n    const renderUserInfo = () => {\r\n        if (!currentUser) return null;\r\n        \r\n        return (\r\n            <div style={{ \r\n                backgroundColor: 'rgba(255,255,255,0.15)', \r\n                padding: '10px 16px', \r\n                borderRadius: '8px',\r\n                marginBottom: '8px',\r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                alignItems: 'center'\r\n            }}>\r\n                <div>\r\n                    <div style={{ fontSize: '14px', fontWeight: 'bold' }}>\r\n                        🧪 Alpha Tester #{currentUser.alphaNumber}: {currentUser.username}\r\n                    </div>\r\n                    <div style={{ fontSize: '12px', opacity: 0.8 }}>\r\n                        {currentUser.totalScans} scans • {currentUser.collection.length} unique cards\r\n                    </div>\r\n                </div>\r\n                <button\r\n                    onClick={() => setShowCollection(!showCollection)}\r\n                    style={{\r\n                        padding: '6px 12px',\r\n                        backgroundColor: 'rgba(255,255,255,0.2)',\r\n                        color: 'white',\r\n                        border: 'none',\r\n                        borderRadius: '4px',\r\n                        fontSize: '12px',\r\n                        cursor: 'pointer'\r\n                    }}\r\n                >\r\n                    📚 Collection\r\n                </button>\r\n            </div>\r\n        );\r\n    };\r\n    \r\n    const renderCollection = () => {\r\n        if (!showCollection || !currentUser) return null;\r\n        \r\n        const collection = userSystem.getCollection();\r\n        \r\n        return (\r\n            <div style={{ \r\n                marginBottom: '20px',\r\n                padding: '20px',\r\n                backgroundColor: '#f8f9fa',\r\n                borderRadius: '8px',\r\n                border: '2px solid #28a745'\r\n            }}>\r\n                <div style={{ \r\n                    display: 'flex', \r\n                    justifyContent: 'space-between', \r\n                    alignItems: 'center',\r\n                    marginBottom: '15px'\r\n                }}>\r\n                    <h3 style={{ margin: 0 }}>📚 Your Collection ({collection.length} unique cards)</h3>\r\n                    <button\r\n                        onClick={() => setShowCollection(false)}\r\n                        style={{\r\n                            padding: '6px 12px',\r\n                            backgroundColor: '#6c757d',\r\n                            color: 'white',\r\n                            border: 'none',\r\n                            borderRadius: '4px',\r\n                            cursor: 'pointer'\r\n                        }}\r\n                    >\r\n                        ✕ Close\r\n                    </button>\r\n                </div>\r\n                \r\n                {collection.length === 0 ? (\r\n                    <div style={{ \r\n                        textAlign: 'center', \r\n                        padding: '40px',\r\n                        color: '#666'\r\n                    }}>\r\n                        <h4>📦 No cards in collection yet</h4>\r\n                        <p>Start scanning some MTG cards to build your collection!</p>\r\n                    </div>\r\n                ) : (\r\n                    <div style={{\r\n                        display: 'grid',\r\n                        gap: '10px',\r\n                        maxHeight: '400px',\r\n                        overflowY: 'auto'\r\n                    }}>\r\n                        {collection.map(card => (\r\n                            <div key={card.id} style={{\r\n                                display: 'flex',\r\n                                justifyContent: 'space-between',\r\n                                alignItems: 'center',\r\n                                padding: '12px',\r\n                                backgroundColor: 'white',\r\n                                borderRadius: '6px',\r\n                                border: '1px solid #ddd'\r\n                            }}>\r\n                                <div style={{ flex: 1 }}>\r\n                                    <div style={{ fontWeight: 'bold', fontSize: '16px' }}>\r\n                                        {card.name}\r\n                                    </div>\r\n                                    <div style={{ fontSize: '12px', color: '#666' }}>\r\n                                        Avg confidence: {card.avgConfidence}% • \r\n                                        Last scanned: {new Date(card.lastScanned).toLocaleDateString()}\r\n                                    </div>\r\n                                </div>\r\n                                \r\n                                <div style={{ \r\n                                    display: 'flex', \r\n                                    alignItems: 'center', \r\n                                    gap: '10px' \r\n                                }}>\r\n                                    <div style={{ \r\n                                        display: 'flex', \r\n                                        alignItems: 'center', \r\n                                        gap: '5px' \r\n                                    }}>\r\n                                        <button\r\n                                            onClick={() => handleUpdateCardCount(card.id, card.count - 1)}\r\n                                            style={{\r\n                                                padding: '4px 8px',\r\n                                                backgroundColor: '#dc3545',\r\n                                                color: 'white',\r\n                                                border: 'none',\r\n                                                borderRadius: '3px',\r\n                                                cursor: 'pointer',\r\n                                                fontSize: '12px'\r\n                                            }}\r\n                                        >\r\n                                            −\r\n                                        </button>\r\n                                        \r\n                                        <span style={{ \r\n                                            minWidth: '30px', \r\n                                            textAlign: 'center',\r\n                                            fontWeight: 'bold'\r\n                                        }}>\r\n                                            {card.count}\r\n                                        </span>\r\n                                        \r\n                                        <button\r\n                                            onClick={() => handleUpdateCardCount(card.id, card.count + 1)}\r\n                                            style={{\r\n                                                padding: '4px 8px',\r\n                                                backgroundColor: '#28a745',\r\n                                                color: 'white',\r\n                                                border: 'none',\r\n                                                borderRadius: '3px',\r\n                                                cursor: 'pointer',\r\n                                                fontSize: '12px'\r\n                                            }}\r\n                                        >\r\n                                            +\r\n                                        </button>\r\n                                    </div>\r\n                                    \r\n                                    <button\r\n                                        onClick={() => handleRemoveCard(card.id)}\r\n                                        style={{\r\n                                            padding: '4px 8px',\r\n                                            backgroundColor: '#f44336',\r\n                                            color: 'white',\r\n                                            border: 'none',\r\n                                            borderRadius: '3px',\r\n                                            cursor: 'pointer',\r\n                                            fontSize: '12px'\r\n                                        }}\r\n                                        title=\"Remove from collection\"\r\n                                    >\r\n                                        🗑️\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    };\r\n    \r\n    const renderStatus = () => {\r\n        if (scanMode === 'auto' && cameraError) {\r\n            return (\r\n                <div style={{ padding: '20px', backgroundColor: '#ffebee', border: '1px solid #f44336', borderRadius: '8px' }}>\r\n                    <h3>❌ Camera Error</h3>\r\n                    <p>{cameraError}</p>\r\n                    <p style={{ fontSize: '14px', color: '#666' }}>\r\n                        💡 Try switching to Manual Scan mode or use a different camera\r\n                    </p>\r\n                </div>\r\n            );\r\n        }\r\n        \r\n        if (!visionService) {\r\n            return (\r\n                <div style={{ padding: '20px', backgroundColor: '#ffebee', border: '1px solid #f44336', borderRadius: '8px' }}>\r\n                    <h3>❌ Service Error</h3>\r\n                    <p>Vision service failed to initialize</p>\r\n                </div>\r\n            );\r\n        }\r\n        \r\n        if (scanMode === 'auto' && !cameraReady) {\r\n            return (\r\n                <div style={{ padding: '20px', backgroundColor: '#fff3e0', border: '1px solid #ff9800', borderRadius: '8px', textAlign: 'center' }}>\r\n                    <h3>📹 Setting up Camera...</h3>\r\n                    <p>Connecting for auto-scan mode...</p>\r\n                </div>\r\n            );\r\n        }\r\n        \r\n        if (countdown !== null) {\r\n            return (\r\n                <div style={{ padding: '20px', backgroundColor: '#e3f2fd', border: '1px solid #2196f3', borderRadius: '8px', textAlign: 'center' }}>\r\n                    <h3>🕐 Scan Starting in {countdown}...</h3>\r\n                    <p>Position your MTG card clearly in the camera view</p>\r\n                    <button \r\n                        onClick={stopAutoScanning}\r\n                        style={{\r\n                            padding: '8px 16px',\r\n                            backgroundColor: '#f44336',\r\n                            color: 'white',\r\n                            border: 'none',\r\n                            borderRadius: '4px',\r\n                            cursor: 'pointer'\r\n                        }}\r\n                    >\r\n                        Cancel\r\n                    </button>\r\n                </div>\r\n            );\r\n        }\r\n        \r\n        if (!scanResult) {\r\n            if (scanMode === 'auto') {\r\n                return (\r\n                    <div style={{ padding: '20px', backgroundColor: '#e8f5e8', border: '1px solid #4caf50', borderRadius: '8px', textAlign: 'center' }}>\r\n                        <h3>✅ Auto-Scan Ready!</h3>\r\n                        <p>Camera ready for automatic card scanning</p>\r\n                    </div>\r\n                );\r\n            } else {\r\n                return (\r\n                    <div style={{ padding: '20px', backgroundColor: '#e8f5e8', border: '1px solid #4caf50', borderRadius: '8px', textAlign: 'center' }}>\r\n                        <h3>📁 Manual Scan Ready!</h3>\r\n                        <p>Click \"Upload & Scan\" to select an image file</p>\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n        \r\n        switch (scanResult.type) {\r\n            case 'processing':\r\n                return (\r\n                    <div style={{ padding: '20px', backgroundColor: '#e3f2fd', border: '1px solid #2196f3', borderRadius: '8px', textAlign: 'center' }}>\r\n                        <h3>🔄 Processing...</h3>\r\n                        <p>{scanResult.message}</p>\r\n                    </div>\r\n                );\r\n                \r\n            case 'success':\r\n                return (\r\n                    <div style={{ padding: '20px', backgroundColor: '#e8f5e8', border: '1px solid #4caf50', borderRadius: '8px' }}>\r\n                        <h3>✅ Card Detected ({scanResult.scanMode}) 🔔</h3>\r\n                        <p style={{ fontSize: '20px', fontWeight: 'bold', margin: '10px 0' }}>{scanResult.cardName}</p>\r\n                        <p>Confidence: <strong>{scanResult.confidence}%</strong></p>\r\n                        {scanResult.strategy && <p>Strategy: <strong>{scanResult.strategy}</strong></p>}\r\n                        {scanResult.processingTime && <p>Processing Time: {scanResult.processingTime}ms</p>}\r\n                        <p style={{ fontSize: '12px', color: '#28a745', fontWeight: 'bold' }}>\r\n                            🔔 Added to collection!\r\n                        </p>\r\n                    </div>\r\n                );\r\n                \r\n            case 'waiting':\r\n                return (\r\n                    <div style={{ padding: '20px', backgroundColor: '#fff3e0', border: '1px solid #ff9800', borderRadius: '8px' }}>\r\n                        <h3>🔍 Looking for Card...</h3>\r\n                        <p>{scanResult.message}</p>\r\n                        {scanResult.details && <p style={{ fontSize: '12px', color: '#999' }}>{scanResult.details}</p>}\r\n                    </div>\r\n                );\r\n                \r\n            case 'error':\r\n                return (\r\n                    <div style={{ padding: '20px', backgroundColor: '#ffebee', border: '1px solid #f44336', borderRadius: '8px' }}>\r\n                        <h3>❌ Scan Error ({scanResult.scanMode})</h3>\r\n                        <p>{scanResult.message}</p>\r\n                        {scanResult.details && <p style={{ fontSize: '12px', color: '#666' }}>{scanResult.details}</p>}\r\n                    </div>\r\n                );\r\n                \r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n    \r\n    const renderHistory = () => {\r\n        if (scannedCards.length === 0) return null;\r\n        \r\n        return (\r\n            <div style={{ marginTop: '20px', padding: '20px', backgroundColor: '#f9f9f9', borderRadius: '8px' }}>\r\n                <h4>📋 Recent Scans ({scannedCards.length})</h4>\r\n                {scannedCards.slice(0, 5).map(card => (\r\n                    <div key={card.id} style={{ \r\n                        display: 'flex', \r\n                        justifyContent: 'space-between', \r\n                        alignItems: 'center',\r\n                        padding: '8px', \r\n                        margin: '5px 0', \r\n                        backgroundColor: 'white', \r\n                        borderRadius: '4px' \r\n                    }}>\r\n                        <span style={{ fontWeight: 'bold' }}>{card.name}</span>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                            <span style={{ \r\n                                padding: '2px 6px',\r\n                                backgroundColor: card.mode === 'auto' ? '#2196f3' : '#ff9800',\r\n                                color: 'white',\r\n                                borderRadius: '3px',\r\n                                fontSize: '11px'\r\n                            }}>\r\n                                {card.mode}\r\n                            </span>\r\n                            <span>{card.confidence}%</span>\r\n                            <span style={{ fontSize: '12px', color: '#666' }}>\r\n                                {new Date(card.timestamp).toLocaleTimeString()}\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n                <button \r\n                    onClick={() => setScannedCards([])}\r\n                    style={{ \r\n                        marginTop: '10px', \r\n                        padding: '8px 16px', \r\n                        backgroundColor: '#f44336', \r\n                        color: 'white', \r\n                        border: 'none', \r\n                        borderRadius: '4px',\r\n                        cursor: 'pointer'\r\n                    }}\r\n                >\r\n                    Clear History\r\n                </button>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    // Admin panel check\r\n    if (showAdminPanel) {\r\n        return <AdminPanel />;\r\n    }\r\n    \r\n    return (\r\n        <div style={{ maxWidth: '800px', margin: '0 auto', padding: '20px', fontFamily: 'Arial, sans-serif' }}>\r\n            {/* Header */}\r\n            <div style={{ \r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                alignItems: 'center',\r\n                marginBottom: '20px', \r\n                padding: '20px', \r\n                background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', \r\n                color: 'white', \r\n                borderRadius: '12px' \r\n            }}>\r\n                <div style={{ flex: 1 }}>\r\n                    <h1 style={{ margin: 0, fontSize: '28px' }}>🃏 MTG Infinity Scanner</h1>\r\n                    {renderUserInfo()}\r\n                    <span style={{ fontWeight: 'bold' }}>\r\n                        {countdown !== null ? `🕐 Starting in ${countdown}...` :\r\n                         isScanning ? '🟢 Auto-Scanning Active' : \r\n                         scanMode === 'auto' && cameraReady ? '🔴 Auto-Scan Ready' : \r\n                         scanMode === 'manual' ? '📁 Manual Scan Mode' :\r\n                         '🟡 Setting up...'}\r\n                    </span>\r\n                </div>\r\n                <div style={{ display: 'flex', gap: '10px', alignItems: 'center' }}>\r\n                    <DonationButton placement=\"header\" />\r\n                    <button\r\n                        onDoubleClick={() => setShowAdminPanel(true)}\r\n                        style={{\r\n                            padding: '6px 8px',\r\n                            backgroundColor: 'rgba(255,255,255,0.2)',\r\n                            color: 'white',\r\n                            border: 'none',\r\n                            borderRadius: '4px',\r\n                            fontSize: '12px',\r\n                            cursor: 'pointer',\r\n                            opacity: 0.7\r\n                        }}\r\n                        title=\"Double-click for admin access\"\r\n                    >\r\n                        🔧\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            \r\n            {/* Collection View */}\r\n            {renderCollection()}\r\n            \r\n            {/* Scan Mode Toggle */}\r\n            <div style={{ \r\n                display: 'flex', \r\n                justifyContent: 'center', \r\n                marginBottom: '20px',\r\n                gap: '10px'\r\n            }}>\r\n                <button\r\n                    onClick={() => setScanMode('auto')}\r\n                    style={{\r\n                        padding: '12px 24px',\r\n                        backgroundColor: scanMode === 'auto' ? '#4caf50' : '#e0e0e0',\r\n                        color: scanMode === 'auto' ? 'white' : '#333',\r\n                        border: 'none',\r\n                        borderRadius: '8px',\r\n                        fontWeight: 'bold',\r\n                        cursor: 'pointer'\r\n                    }}\r\n                >\r\n                    📹 Auto Scan (Camera)\r\n                </button>\r\n                <button\r\n                    onClick={() => setScanMode('manual')}\r\n                    style={{\r\n                        padding: '12px 24px',\r\n                        backgroundColor: scanMode === 'manual' ? '#4caf50' : '#e0e0e0',\r\n                        color: scanMode === 'manual' ? 'white' : '#333',\r\n                        border: 'none',\r\n                        borderRadius: '8px',\r\n                        fontWeight: 'bold',\r\n                        cursor: 'pointer'\r\n                    }}\r\n                >\r\n                    📁 Manual Scan (Upload)\r\n                </button>\r\n            </div>\r\n            \r\n            {/* Video Container (Auto Mode Only) */}\r\n            {scanMode === 'auto' && (\r\n                <div style={{ textAlign: 'center', marginBottom: '20px' }}>\r\n                    <div style={{ \r\n                        position: 'relative',\r\n                        display: 'inline-block',\r\n                        border: '3px solid #4caf50',\r\n                        borderRadius: '8px',\r\n                        overflow: 'hidden',\r\n                        backgroundColor: '#000'\r\n                    }}>\r\n                        <video \r\n                            ref={videoRef}\r\n                            autoPlay \r\n                            playsInline \r\n                            muted\r\n                            style={{\r\n                                width: '100%',\r\n                                maxWidth: '640px',\r\n                                height: 'auto',\r\n                                display: 'block'\r\n                            }}\r\n                        />\r\n                        {!cameraReady && (\r\n                            <div style={{\r\n                                position: 'absolute',\r\n                                top: '50%',\r\n                                left: '50%',\r\n                                transform: 'translate(-50%, -50%)',\r\n                                color: 'white',\r\n                                fontSize: '18px',\r\n                                fontWeight: 'bold',\r\n                                textAlign: 'center',\r\n                                backgroundColor: 'rgba(0,0,0,0.8)',\r\n                                padding: '20px',\r\n                                borderRadius: '8px'\r\n                            }}>\r\n                                📹<br/>Connecting to Camera...\r\n                            </div>\r\n                        )}\r\n                        {countdown !== null && (\r\n                            <div style={{\r\n                                position: 'absolute',\r\n                                top: '50%',\r\n                                left: '50%',\r\n                                transform: 'translate(-50%, -50%)',\r\n                                color: 'white',\r\n                                fontSize: '48px',\r\n                                fontWeight: 'bold',\r\n                                textShadow: '2px 2px 4px rgba(0,0,0,0.8)'\r\n                            }}>\r\n                                {countdown}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n            \r\n            {/* Controls */}\r\n            <div style={{ textAlign: 'center', marginBottom: '20px' }}>\r\n                {scanMode === 'auto' ? (\r\n                    <button \r\n                        onClick={isScanning || countdown !== null ? stopAutoScanning : startAutoScanning}\r\n                        disabled={!!cameraError || !visionService || !cameraReady}\r\n                        style={{\r\n                            padding: '16px 32px',\r\n                            fontSize: '18px',\r\n                            backgroundColor: (isScanning || countdown !== null) ? '#f44336' : '#4caf50',\r\n                            color: 'white',\r\n                            border: 'none',\r\n                            borderRadius: '8px',\r\n                            cursor: (!!cameraError || !visionService || !cameraReady) ? 'not-allowed' : 'pointer',\r\n                            opacity: (!!cameraError || !visionService || !cameraReady) ? 0.6 : 1,\r\n                            fontWeight: 'bold'\r\n                        }}\r\n                    >\r\n                        {countdown !== null ? '⏹️ Cancel Countdown' :\r\n                         isScanning ? '⏹️ Stop Auto-Scan' : '▶️ Start Auto-Scan (3s)'}\r\n                    </button>\r\n                ) : (\r\n                    <div>\r\n                        <button \r\n                            onClick={handleManualScan}\r\n                            disabled={!visionService}\r\n                            style={{\r\n                                padding: '16px 32px',\r\n                                fontSize: '18px',\r\n                                backgroundColor: '#ff9800',\r\n                                color: 'white',\r\n                                border: 'none',\r\n                                borderRadius: '8px',\r\n                                cursor: !visionService ? 'not-allowed' : 'pointer',\r\n                                opacity: !visionService ? 0.6 : 1,\r\n                                fontWeight: 'bold'\r\n                            }}\r\n                        >\r\n                            📁 Upload & Scan Image\r\n                        </button>\r\n                        <input\r\n                            ref={fileInputRef}\r\n                            type=\"file\"\r\n                            accept=\"image/*\"\r\n                            onChange={handleFileSelect}\r\n                            style={{ display: 'none' }}\r\n                        />\r\n                        <p style={{ margin: '10px 0 0 0', color: '#666', fontSize: '14px' }}>\r\n                            Supports: JPG, PNG, WEBP • Max size: 10MB\r\n                        </p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n            \r\n            {/* Results */}\r\n            <div>\r\n                {renderStatus()}\r\n                {renderHistory()}\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            <div style={{ \r\n                marginTop: '40px', \r\n                padding: '20px', \r\n                textAlign: 'center',\r\n                backgroundColor: '#f8f9fa',\r\n                borderRadius: '8px'\r\n            }}>\r\n                <p style={{ margin: '0 0 15px 0', color: '#666' }}>\r\n                    🍕 Support a Starving Dev - Coffee and ramen funds appreciated!\r\n                </p>\r\n                <DonationButton placement=\"footer\" />\r\n                <p style={{ margin: '15px 0 0 0', fontSize: '12px', color: '#999' }}>\r\n                    Alpha Build • Collection System • Built with ❤️ for Magic players\r\n                </p>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Scanner;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}